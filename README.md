# å·¥ç¨‹èµ„æ–™å®¡æ ¸æ™ºèƒ½ä½“

> ğŸ“š **æ¨èé˜…è¯»**ï¼šå¦‚æœä½ å…³æ³¨çš„æ˜¯"å¦‚ä½•ä»çœŸå®é—®é¢˜åˆ°ç³»ç»Ÿè®¾è®¡"ï¼Œå»ºè®®å…ˆé˜…è¯» [æ–¹æ³•è®ºæ–‡æ¡£](docs/methodology.md)ã€‚

åŸºäº LangGraph æ¡†æ¶æ„å»ºçš„å·¥ç¨‹èµ„æ–™å®¡æ ¸æ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç”¨äºè‡ªåŠ¨å®¡æ ¸å·¥ç¨‹é¡¹ç›®æ–‡æ¡£çš„åˆè§„æ€§å’Œä¸€è‡´æ€§ã€‚

## é¡¹ç›®ç®€ä»‹

å·¥ç¨‹èµ„æ–™å®¡æ ¸æ™ºèƒ½ä½“æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ–‡æ¡£å®¡æ ¸ç³»ç»Ÿï¼Œèƒ½å¤Ÿå¤„ç†å·¥ç¨‹é¡¹ç›®ä¸­çš„å„ç±»æ–‡æ¡£ï¼ˆé‡‡è´­åˆåŒã€é€è´§å•ã€é‡‡è´­å…¥åº“å•ç­‰ï¼‰ï¼Œè‡ªåŠ¨æ£€æŸ¥æ–‡æ¡£çš„è§„èŒƒæ€§ï¼ˆæ—¥æœŸã€å°ç« ã€ç­¾åï¼‰å’Œè·¨æ–‡æ¡£ä¸€è‡´æ€§ï¼ˆæ•°é‡ä¸€è‡´æ€§ã€æ—¥æœŸä¸€è‡´æ€§ï¼‰ã€‚

### ä¸šåŠ¡åœºæ™¯

åœ¨å·¥ç¨‹é¡¹ç›®ç®¡ç†ä¸­ï¼Œéœ€è¦å®¡æ ¸å¤§é‡çš„å·¥ç¨‹èµ„æ–™ï¼ŒåŒ…æ‹¬ï¼š

1. **è§„èŒƒæ€§æ£€æŸ¥**ï¼šæ£€æŸ¥æ–‡æ¡£ä¸­çš„æ—¥æœŸã€å°ç« ã€ç­¾åæ˜¯å¦å¡«å†™å®Œæ•´ã€æ ¼å¼æ­£ç¡®
2. **ä¸€è‡´æ€§æ£€æŸ¥**ï¼šæ£€æŸ¥è·¨æ–‡æ¡£ä¹‹é—´æ•°é‡ã€æ—¥æœŸç­‰å…³é”®ä¿¡æ¯æ˜¯å¦ä¸€è‡´

ä¼ ç»Ÿäººå·¥å®¡æ ¸æ–¹å¼å­˜åœ¨æ•ˆç‡ä½ã€æ˜“æ¼æ£€ç­‰é—®é¢˜ã€‚æœ¬ç³»ç»Ÿé€šè¿‡ AI æŠ€æœ¯å®ç°è‡ªåŠ¨åŒ–å®¡æ ¸ï¼Œå¤§å¹…æå‡å®¡æ ¸æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚

> **æ³¨æ„**ï¼šç”±äºé¡¹ç›®æ•°æ®å…·æœ‰æ•æ„Ÿæ€§ï¼Œæœ¬ä»“åº“ä¸åŒ…å«ç¤ºä¾‹æ•°æ®ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ LangSmith é“¾æ¥æŸ¥çœ‹å®é™…è¿è¡Œç»“æœç¤ºä¾‹ï¼šhttps://smith.langchain.com/public/2542f224-8f46-473d-b0e6-c70f3e9fb7f2/r

### ä¸šåŠ¡æµç¨‹

```
æ‰«æç›®å½• â†’ å¹¶è¡ŒåŒè·¯å¾„æ£€æŸ¥ â†’ ç»“æœæ±‡æ€»
    â†“               â†“              â†“
 å‘ç°PDF/å›¾ç‰‡    è§„èŒƒæ€§æ£€æŸ¥     ä¸€è‡´æ€§æ£€æŸ¥
              (æ—¥æœŸ/å°ç« /ç­¾å)  (è·¨æ–‡æ¡£ä¸€è‡´æ€§)
```

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| è§„èŒƒæ€§æ£€æŸ¥ | æ£€æŸ¥æ–‡æ¡£ä¸­çš„æ—¥æœŸã€å°ç« ã€ç­¾åæ˜¯å¦å¡«å†™å®Œæ•´ |
| ä¸€è‡´æ€§æ£€æŸ¥ | æ£€æŸ¥è·¨æ–‡æ¡£ä¹‹é—´æ•°é‡ã€æ—¥æœŸç­‰å…³é”®ä¿¡æ¯æ˜¯å¦ä¸€è‡´ |
| æ–‡æ¡£åˆ†ç±» | è‡ªåŠ¨è¯†åˆ«æ–‡æ¡£ç±»å‹ï¼ˆé‡‡è´­åˆåŒã€é€è´§å•ã€é‡‡è´­å…¥åº“å•ï¼‰ |
| æ•°æ®æå– | ä»æ–‡æ¡£ä¸­æå–ç»“æ„åŒ–æ•°æ®ï¼ˆæ—¥æœŸã€æ•°é‡ã€ç‰©æ–™ä¿¡æ¯ï¼‰ |
| OCR è¯†åˆ« | å°† PDF å’Œå›¾ç‰‡æ–‡æ¡£è½¬æ¢ä¸ºå¯ç¼–è¾‘æ–‡æœ¬ |

## æ¨¡å‹èµ„æºè¯´æ˜

æœ¬ç³»ç»Ÿä½¿ç”¨ä¸‰ç§ä¸åŒçš„ AI æ¨¡å‹ï¼Œå„å¸å…¶èŒï¼š

| æ¨¡å‹ | ä½œç”¨ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| **qwen3-14B** | æ–‡æœ¬å¤§è¯­è¨€æ¨¡å‹ | ç»“æ„åŒ–æ•°æ®æå–ã€æ–‡æœ¬ç†è§£ã€ä¸€è‡´æ€§åˆ†æ |
| **paddleocr-vl 0.9B** | OCR å…‰å­¦å­—ç¬¦è¯†åˆ« | PDF å’Œå›¾ç‰‡æ–‡æ¡£è½¬æ–‡æœ¬ã€æ–‡æ¡£åˆ†ç±» |
| **qwen3-vl-4B** | è§†è§‰è¯­è¨€æ¨¡å‹ | æ£€æµ‹æ—¥æœŸã€å°ç« ã€ç­¾ååŒºåŸŸ |

## å·²å®ç°åŠŸèƒ½

### è§„èŒƒæ€§æ£€æŸ¥

- **æ—¥æœŸæ£€æŸ¥**ï¼šæ£€æµ‹æ–‡æ¡£ä¸­çš„æ—¥æœŸå­—æ®µï¼ŒéªŒè¯æ˜¯å¦å¡«å†™å®Œæ•´
- **å°ç« æ£€æŸ¥**ï¼šæ£€æµ‹æ–‡æ¡£ä¸­çš„å°ç« åŒºåŸŸï¼ŒéªŒè¯æ˜¯å¦ç›–æœ‰å°ç« 
- **ç­¾åæ£€æŸ¥**ï¼šæ£€æµ‹æ–‡æ¡£ä¸­çš„ç­¾ååŒºåŸŸï¼ŒéªŒè¯æ˜¯å¦ç­¾å

### ä¸€è‡´æ€§æ£€æŸ¥

- **æ•°é‡ä¸€è‡´æ€§**ï¼šæ£€æŸ¥é‡‡è´­åˆåŒã€é€è´§å•ã€é‡‡è´­å…¥åº“å•ä¸­çš„ç‰©æ–™æ•°é‡æ˜¯å¦ä¸€è‡´
- ~~**æ—¥æœŸä¸€è‡´æ€§**~~ï¼šæ£€æŸ¥æ–‡æ¡£ä¹‹é—´çš„æ—¥æœŸé€»è¾‘å…³ç³»æ˜¯å¦åˆç†ï¼ˆ*å½“å‰åŠŸèƒ½å·²å®ç°ä½†æš‚æ—¶æ³¨é‡Šï¼Œå¦‚éœ€å¯ç”¨è¯·ä¿®æ”¹ `audit_agent/graphs/consistency/checking_subgraph.py`*ï¼‰

### æ”¯æŒçš„æ–‡æ¡£ç±»å‹

- é‡‡è´­åˆåŒ
- é€è´§å•
- é‡‡è´­å…¥åº“å•

## é¡¹ç›®æ•ˆæœè¯„ä¼°

### è¿›é”€å­˜æ•°é‡ä¸€è‡´æ€§è¯„ä¼°

**æµ‹è¯•æ•°æ®**ï¼šåŸºäº 2 ä¸ªå®Œæ•´å·¥ç¨‹èµ„æ–™

| æ£€å‡ºæƒ…å†µ | æ•°é‡ |
|----------|------|
| æ£€å‡º"æ•°é‡ä¸ä¸€è‡´"é—®é¢˜ | 20 æ¡ |
| ç»äººå·¥æ ¸éªŒçœŸå®é—®é¢˜ | 2 æ¡ |
| è¯¯æŠ¥æ•°é‡ | 18 æ¡ |
| å‡†ç¡®ç‡ | 10% |

**ä¸»è¦è¯¯æŠ¥åŸå› **ï¼š

| åŸå›  | è¯´æ˜ |
|------|------|
| å•æ®æ··æ‚ | éƒ¨åˆ†é‡‡è´­åˆåŒ PDF å†…åµŒäº†é€è´§å•å†…å®¹ï¼Œå¯¼è‡´ç‰©æ–™æ•°é‡é‡å¤ç´¯åŠ  |
| æ•°å€¼è§£æå¤±è´¥ | ææ–™æ•°é‡å«åƒåˆ†ä½é€—å·ï¼ˆå¦‚ "3,000.0000"ï¼‰ï¼Œæœªæ­£ç¡®è½¬æ¢ä¸ºæµ®ç‚¹æ•° |
| å•ä½ä¸ä¸€è‡´ | åˆåŒä¸é€è´§å•å•ä½ä¸º kgï¼Œå…¥åº“å•ä¸º tï¼Œæœªåšå•ä½æ¢ç®— |
| è¡¨æ ¼è·¨é¡µæ–­è£‚ | åˆåŒè¡¨æ ¼è·¨é¡µæ—¶ï¼Œæ¬¡é¡µç¼ºå¤±è¡¨å¤´ï¼Œå¯¼è‡´ OCR ç»“æ„åŒ–æ—¶å­—æ®µé”™ä½ï¼ˆæ•°é‡/å•ä»·äº’æ¢ï¼‰ |
| OCR è¯†åˆ«åå·® | PaddleOCR-VL åœ¨å¤æ‚ç‰ˆé¢ä¸­å¶å‘å­—æ®µé”™ä½ |
| å°ç« å¹²æ‰° | ç›–ç« åŒºåŸŸæ–‡å­—è¢«è¯¯è¯†ï¼Œå½±å“å…³é”®å­—æ®µæå– |

### è¿›é”€å­˜æ—¶é—´ä¸€è‡´æ€§è¯„ä¼°

**æµ‹è¯•æ•°æ®**ï¼šæŠ½æ · 10 æ¡

| æ£€å‡ºæƒ…å†µ | æ•°é‡ |
|----------|------|
| çœŸå®æ—¶é—´é€»è¾‘é”™è¯¯ | 1 æ¡ |
| è¯¯æŠ¥æ•°é‡ | 9 æ¡ |
| å‡†ç¡®ç‡ | 10% |

**ä¸»è¦è¯¯æŠ¥åŸå› **ï¼š

| åŸå›  | è¯´æ˜ |
|------|------|
| å¤šå•æ®æœªå¯¹é½ | åŒä¸€é¡¹ç›®å­˜åœ¨å¤šä»½é€è´§å•/å…¥åº“å•ï¼Œä½†æ ¡éªŒæ—¶æœªæŒ‰ç‰©æ–™æ‰¹æ¬¡æˆ–å¯¹åº”å…³ç³»åŒ¹é…æ—¥æœŸï¼Œå¯¼è‡´è·¨å•æ®è¯¯æ¯” |

> **æ³¨æ„**ï¼šè¯¥åŠŸèƒ½å½“å‰å·²å®ç°ä½†æš‚æ—¶æ³¨é‡Šï¼Œå¦‚éœ€å¯ç”¨è¯·ä¿®æ”¹ `audit_agent/graphs/consistency/checking_subgraph.py`

### è§„èŒƒæ€§æ£€æŸ¥è¯„ä¼°

**æµ‹è¯•æ•°æ®**ï¼šåŸºäº 1 ä»½å®Œæ•´èµ„æ–™

| æ£€æŸ¥é¡¹ | æ£€å‡ºæ•°é‡ | æ­£ç¡®æ•°é‡ | å‡†ç¡®ç‡ |
|--------|----------|----------|--------|
| æœªç­¾å­— | 6 å¤„ | 6 å¤„ | 100% |
| æœªå¡«æ—¥æœŸ | 6 å¤„ | 5 å¤„ | 83.3% |
| æœªç›–ç«  | 1 å¤„ | 1 å¤„ | 100% |

**æ”¹è¿›æ–¹å‘**ï¼š

å½“å‰æ£€å‡ºæ•°é‡åå°‘ï¼Œä¸»è¦æ˜¯åªå¤„ç†äº†"æœ‰æ–‡å­—æç¤º"çš„é¡µé¢ï¼Œåç»­åŠ å…¥æ— æ ‡è¯†é¡µé¢è¯†åˆ«åï¼Œé¢„è®¡èƒ½å¤§å¹…æå‡è¦†ç›–èŒƒå›´ã€‚

## ç¯å¢ƒå‡†å¤‡

### Python ç‰ˆæœ¬è¦æ±‚

Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬

### ä¾èµ–çš„æœ¬åœ°æ¨¡å‹æœåŠ¡

ç³»ç»Ÿä¾èµ–ä»¥ä¸‹æœ¬åœ°æ¨¡å‹æœåŠ¡ï¼Œéœ€è¦æå‰éƒ¨ç½²ï¼š

1. **è§†è§‰æ¨¡å‹æœåŠ¡ (qwen3-vl-4b)**ï¼šç”¨äºæ—¥æœŸã€å°ç« ã€ç­¾ååŒºåŸŸæ£€æµ‹
   - é»˜è®¤åœ°å€ï¼š`http://localhost:8000/v1`

2. **æ–‡æœ¬æ¨¡å‹æœåŠ¡ (qwen3-14b)**ï¼šç”¨äºç»“æ„åŒ–æ•°æ®æå–å’Œä¸€è‡´æ€§åˆ†æ
   - é»˜è®¤åœ°å€ï¼š`http://localhost:9000/v1`

3. **OCR æœåŠ¡ (paddleocr-vl)**ï¼šç”¨äºæ–‡æ¡£ OCR è¯†åˆ«
   - æœ¬åœ°æ¨¡å¼ï¼š`http://localhost:8000/v1`
   - ä¹Ÿå¯ä½¿ç”¨é£æ¡¨ AI Studio APIï¼ˆå…è´¹ï¼Œæœ‰æ¯æ—¥é¢åº¦ï¼‰

### Poppler å®‰è£…ï¼ˆPDF å¤„ç†ï¼‰

ç³»ç»Ÿéœ€è¦ Poppler å·¥å…·å°† PDF è½¬æ¢ä¸ºå›¾ç‰‡ï¼š

**Windows:**
1. ä¸‹è½½ Poppler for Windowsï¼šhttps://github.com/oschwartz10612/poppler-windows/releases/
2. è§£å‹åˆ°ä»»æ„ç›®å½•ï¼Œå¦‚ `D:/poppler-25.12.0/Library/bin`
3. åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½® `POPLER_PATH`

**Linux/macOS:**
```bash
# Ubuntu/Debian
sudo apt-get install poppler-utils

# macOS
brew install poppler
```

## å®‰è£…æ­¥éª¤

### 1. è·å–é¡¹ç›®

å¦‚æœæ‚¨å·²ç»æ‹¥æœ‰æœ¬é¡¹ç›®çš„æœ¬åœ°å‰¯æœ¬ï¼Œè¯·ç›´æ¥è¿›å…¥é¡¹ç›®ç›®å½•ã€‚

å¦‚æœéœ€è¦ä»è¿œç¨‹ä»“åº“å…‹éš†ï¼Œè¯·ä½¿ç”¨ï¼š

```bash
git clone https://github.com/yang-zhuang/engineering_audit_agent.git
cd engineering_audit_agent
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
```

### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

`requirements.txt` å†…å®¹ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰ï¼š
```
pytest
langgraph>=0.2.0
langgraph-cli[inmem]>=0.1.0
langgraph-checkpoint-sqlite>=0.1.0
pdf2image>=1.17.0
python-dotenv>=1.0.0
pydantic>=2.0.0
langchain-openai>=0.1.0
paddleocr>=2.7.0
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶å¹¶æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼š

```bash
# å¦‚æœæœ‰ .env.exampleï¼Œå…ˆå¤åˆ¶
cp .env.example .env
```

ç„¶ååœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```env
# ===== è§†è§‰æ¨¡å‹é…ç½® =====
VISION_MODEL_BASE_URL=http://localhost:8000/v1
VISION_MODEL_API_KEY=your-api-key
VISION_MODEL_NAME=Qwen3-VL-4B-Instruct

# ===== OCR å¼•æ“é…ç½® =====
# å·¥ä½œæ¨¡å¼ï¼šlocal_only / api_only / hybrid
OCR_WORK_MODE=hybrid

# æœ¬åœ° OCR é…ç½®
PADDLE_VL_REC_BACKEND=vllm-server
PADDLE_VL_SERVER_URL=http://localhost:8000/v1

# é£æ¡¨ API é…ç½®ï¼ˆå¯é€‰ï¼‰
PADDLE_API_URL=https://your-aistudio-app.com/layout-parsing
PADDLE_API_TOKEN=your-token

# ===== è¯­è¨€æ¨¡å‹é…ç½® =====
LLM_BASE_URL=http://localhost:9000/v1
LLM_API_KEY=your-api-key
LLM_MODEL_NAME=Qwen3-14B-AWQ
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=15000

# ===== OCR ç»“æœå­˜å‚¨ =====
OCR_RESULTS_BASE_PATH=./ocr_results

# ===== PDF å¤„ç†é…ç½® =====
POPLER_PATH=D:/poppler-25.12.0/Library/bin  # Windows
PDF_TO_IMAGE_DPI=200

# ===== å¤„ç†é€‰é¡¹ =====
USE_STATIC_GRAPH=1
MAX_CONCURRENT_FILES=5
VERBOSE_LOGGING=true
ENABLE_CHECKPOINTING=true
```

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [docs/configuration.md](docs/configuration.md)ã€‚

## è¿è¡Œæ–¹å¼

### å¯åŠ¨ LangGraph å¼€å‘æœåŠ¡å™¨

```bash
langgraph dev
```

### è®¿é—® LangGraph Studio

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š

```
http://localhost:8123
```

åœ¨ LangGraph Studio ä¸­ï¼š
1. é€‰æ‹© `engineering_audit` å›¾
2. è¾“å…¥ `document_root_path`ï¼ˆæ–‡æ¡£æ ¹ç›®å½•è·¯å¾„ï¼‰
3. ç‚¹å‡»è¿è¡Œ

### å‘½ä»¤è¡Œè¿è¡Œï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ç›´æ¥è¿è¡Œè€Œä¸ä½¿ç”¨ Studioï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„è¿è¡Œè„šæœ¬ï¼š

```python
# run.py
from audit_agent.graphs.root_graph import build_graph

graph = build_graph()
result = graph.invoke({
    "document_root_path": "D:/Documents/Engineering_Projects"
})

print("å®¡æ ¸ç»“æœï¼š", result)
```

## é…ç½®è¯´æ˜

### .env æ–‡ä»¶é…ç½®é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `OCR_WORK_MODE` | OCR å·¥ä½œæ¨¡å¼ | `hybrid` |
| `VISION_MODEL_BASE_URL` | è§†è§‰æ¨¡å‹ API åœ°å€ | `http://localhost:8000/v1` |
| `LLM_BASE_URL` | æ–‡æœ¬æ¨¡å‹ API åœ°å€ | `http://localhost:9000/v1` |
| `OCR_RESULTS_BASE_PATH` | OCR ç»“æœå­˜å‚¨è·¯å¾„ | `./ocr_results` |
| `POPLER_PATH` | Poppler è·¯å¾„ï¼ˆWindowsï¼‰ | - |
| `USE_STATIC_GRAPH` | ä½¿ç”¨é™æ€å›¾ï¼ˆ0=åŠ¨æ€ï¼Œ1=é™æ€ï¼‰ | `1` |

### langgraph.json é…ç½®

`langgraph.json` å®šä¹‰äº† LangGraph CLI çš„é…ç½®ï¼š

```json
{
  "$schema": "https://langgra.ph/schema.json",
  "dependencies": [
    "langgraph",
    "langchain",
    "pydantic",
    "./audit_agent"
  ],
  "graphs": {
    "engineering_audit": "./audit_agent/graphs/root_graph.py:build_graph"
  },
  "env": "./.env",
  "input_schemas": {
    "engineering_audit": {
      "document_root_path": {
        "type": "string",
        "description": "å·¥ç¨‹æ–‡æ¡£æ ¹ç›®å½•è·¯å¾„",
        "default": ""
      }
    }
  }
}
```

### OCR å·¥ä½œæ¨¡å¼é€‰æ‹©

| æ¨¡å¼ | è¯´æ˜ | æ¨èåœºæ™¯ |
|------|------|----------|
| `local_only` | ä»…ä½¿ç”¨æœ¬åœ° PaddleOCR-VL æ¨¡å‹ | æœ‰æœ¬åœ° GPUï¼Œè¿½æ±‚é€Ÿåº¦ |
| `api_only` | ä»…ä½¿ç”¨é£æ¡¨ AI Studio API | æ— æœ¬åœ° GPUï¼ŒAPI é¢åº¦å……è¶³ |
| `hybrid` | æ··åˆæ¨¡å¼ï¼Œä¼˜å…ˆ APIï¼Œå¤±è´¥æ—¶åˆ‡æ¢æœ¬åœ° | **æ¨è**ï¼Œå¹³è¡¡é€Ÿåº¦å’Œå¯é æ€§ |

## é¡¹ç›®ç»“æ„

```
audit_agent/
â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ extraction_config.py    # æå–é…ç½®
â”‚   â””â”€â”€ settings.py             # åº”ç”¨é…ç½®
â”‚
â”œâ”€â”€ graphs/              # LangGraph æµç¨‹å›¾
â”‚   â”œâ”€â”€ root_graph.py            # ä¸»å…¥å£å›¾
â”‚   â”œâ”€â”€ normative/               # è§„èŒƒæ€§æ£€æŸ¥å­å›¾
â”‚   â”‚   â”œâ”€â”€ normative_graph_static.py
â”‚   â”‚   â”œâ”€â”€ date_graph_streaming.py
â”‚   â”‚   â”œâ”€â”€ seal_graph_streaming.py
â”‚   â”‚   â””â”€â”€ signature_graph_streaming.py
â”‚   â””â”€â”€ consistency/             # ä¸€è‡´æ€§æ£€æŸ¥å­å›¾
â”‚       â”œâ”€â”€ consistency_graph_static.py
â”‚       â”œâ”€â”€ ocr_processing_graph_static.py
â”‚       â”œâ”€â”€ extraction_subgraph.py
â”‚       â””â”€â”€ checking_subgraph.py
â”‚
â”œâ”€â”€ models/              # AI æ¨¡å‹å°è£…
â”‚   â”œâ”€â”€ text_llm.py              # æ–‡æœ¬æ¨¡å‹å·¥å‚
â”‚   â”œâ”€â”€ vision_llm.py            # è§†è§‰æ¨¡å‹å·¥å‚
â”‚   â””â”€â”€ ocr/                     # OCR æ¨¡å‹
â”‚       â”œâ”€â”€ paddle_vl_model.py
â”‚       â””â”€â”€ api_ocr_model.py
â”‚
â”œâ”€â”€ nodes/               # å¤„ç†èŠ‚ç‚¹
â”‚   â”œâ”€â”€ common/                   # é€šç”¨èŠ‚ç‚¹
â”‚   â”‚   â””â”€â”€ scan_directory.py
â”‚   â”œâ”€â”€ normative/                # è§„èŒƒæ€§æ£€æŸ¥èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ collect_date_files.py
â”‚   â”‚   â”œâ”€â”€ collect_seal_files.py
â”‚   â”‚   â”œâ”€â”€ collect_signature_files.py
â”‚   â”‚   â”œâ”€â”€ detect_date_regions_in_file.py
â”‚   â”‚   â”œâ”€â”€ extract_date_identifiers_in_file.py
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ consistency/              # ä¸€è‡´æ€§æ£€æŸ¥èŠ‚ç‚¹
â”‚       â”œâ”€â”€ discover_project_ioc_roots.py
â”‚       â”œâ”€â”€ discover_ioc_groups.py
â”‚       â”œâ”€â”€ recognize_file_with_ocr.py
â”‚       â”œâ”€â”€ classify_ioc_group_documents.py
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ prompts/             # AI æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ date_area_detect.txt
â”‚   â”œâ”€â”€ seal_area_detect.txt
â”‚   â”œâ”€â”€ signature_area_detect.txt
â”‚   â”œâ”€â”€ check_date_filling_status.txt
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ schemas/             # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ error_item.py
â”‚
â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ prompt_loader.py          # æç¤ºè¯åŠ è½½å™¨
â”‚   â”œâ”€â”€ image_loader.py           # å›¾ç‰‡åŠ è½½å™¨
â”‚   â”œâ”€â”€ image_encoder.py          # å›¾ç‰‡ç¼–ç å™¨
â”‚   â”œâ”€â”€ vision_inference.py       # è§†è§‰æ¨ç†æœåŠ¡
â”‚   â””â”€â”€ ocr/                      # OCR æœåŠ¡
â”‚
â”œâ”€â”€ state/               # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ root_state.py
â”‚   â”œâ”€â”€ normative_state.py
â”‚   â”œâ”€â”€ consistency_state.py
â”‚   â”œâ”€â”€ date_state.py
â”‚   â”œâ”€â”€ seal_state.py
â”‚   â””â”€â”€ signature_state.py
â”‚
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â”œâ”€â”€ path_utils.py
    â”œâ”€â”€ date_utils.py
    â””â”€â”€ material_utils.py
```

## å¦‚ä½•ä¿®æ”¹é¡¹ç›®

### ä¿®æ”¹é…ç½®æ–‡ä»¶

ä¸»è¦é…ç½®æ–‡ä»¶ä¸º `.env`ï¼Œä¿®æ”¹åé‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆã€‚

### æ·»åŠ æ–°çš„æ£€æŸ¥è§„åˆ™

1. åœ¨ `prompts/` ç›®å½•ä¸‹æ·»åŠ å¯¹åº”çš„æç¤ºè¯æ–‡ä»¶
2. åœ¨ `nodes/` ç›®å½•ä¸‹åˆ›å»ºç›¸åº”çš„å¤„ç†èŠ‚ç‚¹
3. åœ¨ç›¸åº”çš„ `graphs/` å­å›¾ä¸­æ·»åŠ èŠ‚ç‚¹è¿æ¥

ä¾‹å¦‚ï¼Œè¦æ·»åŠ ä¸€ä¸ªæ–°çš„æ£€æŸ¥è§„åˆ™ï¼š

1. åˆ›å»ºæç¤ºè¯æ–‡ä»¶ `prompts/new_check_area_detect.txt`
2. åˆ›å»ºèŠ‚ç‚¹æ–‡ä»¶ `nodes/normative/detect_new_check_regions_in_file.py`
3. åœ¨ `graphs/normative/normative_graph_static.py` ä¸­æ·»åŠ èŠ‚ç‚¹è¿æ¥

### æ‰©å±•æ–°çš„æ–‡æ¡£ç±»å‹æ”¯æŒ

1. åœ¨ `prompts/` ç›®å½•ä¸‹æ·»åŠ æ–‡æ¡£åˆ†ç±»å’Œæ•°æ®æå–æç¤ºè¯
2. åœ¨ `nodes/consistency/extraction/` ä¸‹åˆ›å»ºæ–°çš„æ–‡æ¡£ç±»å‹å¤„ç†æ¨¡å—
3. æ›´æ–° `nodes/consistency/classify_ioc_group_documents.py` æ·»åŠ æ–°çš„æ–‡æ¡£ç±»å‹

## æ–‡æ¡£å¼•ç”¨

- [æ–¹æ³•è®ºï¼šä»é—®é¢˜åˆ°ç³»ç»Ÿçš„è®¾è®¡æ€è·¯](docs/methodology.md) - **å¼ºçƒˆæ¨è**ï¼šä»çœŸå®é—®é¢˜åˆ°è½åœ°ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡æ€è·¯
- [ç³»ç»Ÿæ¶æ„è¯´æ˜](docs/architecture.md) - è¯¦ç»†çš„ç³»ç»Ÿæ¶æ„å’Œæ•°æ®æµ
- [é…ç½®æŒ‡å—](docs/configuration.md) - å®Œæ•´çš„é…ç½®é€‰é¡¹è¯´æ˜
- [å¼€å‘æŒ‡å—](docs/development.md) - å¼€å‘ç¯å¢ƒæ­å»ºå’Œä»£ç è§„èŒƒ
- [API å‚è€ƒ](docs/api-reference.md) - å…³é”®ç±»å’Œå‡½æ•°è¯´æ˜

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚
